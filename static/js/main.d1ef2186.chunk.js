(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/coffee.7ab8c59e.svg"},32:function(e,t,a){e.exports=a.p+"static/media/user.7a21cbe9.svg"},36:function(e,t,a){e.exports=a(50)},48:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),c=a.n(o),s=a(12),i=a(54),l=a(15),u=a(4),m=a(17),d=a.n(m),p=a(21),h=a(5),f=a(6),g=new(function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"login",value:function(e){localStorage.setItem("authenticated",!0),localStorage.setItem("userId",e)}},{key:"logout",value:function(){localStorage.setItem("authenticated",!1),delete localStorage.userId}},{key:"isAuthenticated",value:function(){return"true"===localStorage.getItem("authenticated")}},{key:"getId",value:function(){return+localStorage.getItem("userId")}},{key:"clearAll",value:function(){delete localStorage.authenticated,delete localStorage.userId}}]),e}()),E=!1,k=!1,b=function(){var e=Object(p.a)(d.a.mark(function e(t){var a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://5bc443613e0ce20013533336.mockapi.io","/projects"));case 3:if(!(a=e.sent).ok){e.next=12;break}return e.next=7,a.json();case 7:n=e.sent,E=!0,t({type:y,payload:n.news}),e.next=13;break;case 12:throw new Error(a.status);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),t({type:j,error:!0,payload:new Error(e.t0).message});case 18:case"end":return e.stop()}},e,this,[[0,15]])}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(d.a.mark(function e(t,a,n){var r,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mysterious-reef-29460.herokuapp.com/api/v1/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:if(!(r=e.sent).ok){e.next=11;break}return e.next=7,r.json();case 7:"ok"===(o=e.sent).status?t({type:"POST_LOGIN_SUCCESS",payload:o.data.id}):(n.reset(),t({type:"POST_LOGIN_FAIL",error:!0,payload:o.message})),e.next=12;break;case 11:throw new Error(r.status);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),n.reset(),t({type:"POST_LOGIN_FAIL",error:!0,payload:new Error(e.t0).message});case 18:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t,a,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(d.a.mark(function e(t,a){var n,r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://mysterious-reef-29460.herokuapp.com/api/v1/user-info/".concat(a));case 3:if(!(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:"ok"===(r=e.sent).status?(k=!0,t({type:"GET_USER_SUCCESS",payload:r.data})):t({type:"GET_USER_FAIL",error:!0,payload:r.message}),e.next=12;break;case 11:throw new Error(n.status);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),t({type:"GET_USER_FAIL",error:!0,payload:new Error(e.t0).message});case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t,a){return e.apply(this,arguments)}}(),y="GET_NEWS_SUCCESS",j="GET_NEWS_FAIL",w={articles:[],error:!1,errorMessage:"",isFetching:!0},S={data:{userId:null,city:"",languages:[],social:[]},error:!1,errorMessage:"",isLoading:!1},_={isLogged:!1,error:!1,errorMessage:"",isChecking:!1},C=a(16),N=function(e){return function(t,a){var n;Object(C.a)(a().bookmarks.articles).map(function(t,a){var r=t.id;t.name;r===e&&(n=a)}),t({type:"DELETE_BOOKMARK",payload:n})}},T={articles:[],message:{text:"",articleId:null},showTooltip:!1},I=Object(l.c)({news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_NEWS_REQUEST":return Object(u.a)({},e);case y:return Object(u.a)({},e,{articles:t.payload,isFetching:!1});case j:return Object(u.a)({},e,{error:!0,errorMessage:t.payload,isFetching:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_REQUEST":return Object(u.a)({},e,{error:!1,isLoading:!0});case"GET_USER_SUCCESS":return Object(u.a)({},e,{data:t.payload,error:!1,isLoading:!1});case"GET_USER_FAIL":return Object(u.a)({},e,{error:!0,errorMessage:t.payload,isLoading:!1});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_LOGIN_REQUEST":return Object(u.a)({},e,{error:!1,isChecking:!0});case"POST_LOGIN_SUCCESS":return g.login(t.payload),Object(u.a)({},e,{isLogged:!0,error:!1,isChecking:!1});case"POST_LOGIN_FAIL":return Object(u.a)({},e,{error:!0,errorMessage:t.payload,isChecking:!1});case"LOGOUT":return g.logout(),Object(u.a)({},e,{isLogged:!1,error:!1,isChecking:!1});default:return e}},bookmarks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_BOOKMARK_SUCCESS":return Object(u.a)({},e,{articles:Object(C.a)(e.articles).concat([t.payload.article]),message:{text:t.payload.message.text,articleId:t.payload.message.articleId},showTooltip:!0});case"ADD_BOOKMARK_FAIL":return Object(u.a)({},e,{message:{text:t.payload.text,articleId:t.payload.articleId},showTooltip:!0});case"CLEAR_BOOKMARK_TOOLTIP":return Object(u.a)({},e,{message:{text:"",articleId:null},showTooltip:!1});case"DELETE_BOOKMARK":var a=t.payload;return Object(u.a)({},e,{articles:Object(C.a)(e.articles.slice(0,a)).concat(Object(C.a)(e.articles.slice(a+1))),showTooltip:!1});default:return e}}}),L=a(29),x=a.n(L),A=a(30),M=Object(l.d)(I,Object(l.a)(A.a,x.a)),U=a(10),B=a(8),R=a(9),G=a(55),K=a(52),F=a(56),D=a(31),P=a.n(D),W=function(e){return r.a.createElement("main",null,r.a.createElement("h1",null,"Good News, Everyone!"),r.a.createElement("h3",null,"Read the latest news from us!"),r.a.createElement("h3",null,r.a.createElement("span",{style:{color:"white",textShadow:"1px 1px 2px black"}},"Free")," articles from experts."),r.a.createElement("img",{className:"coffee-cup",src:P.a,alt:"coffee cup"}))},J=a(34),Q=a(51),q=function(e){var t=e.id,a=e.name;return r.a.createElement("div",{key:t,className:"bookmark-block"},r.a.createElement(Q.a,{to:"/news/".concat(t)},a),r.a.createElement("i",{className:"fa fa-ban","aria-hidden":"true",onClick:e.deleteBookmark.bind(null,t)}))},z=function(e){var t="wrong_email_or_password"===e.message?"Wrong email or password. Try again.":"user_not_found"===e.message?"User not found. Enter correct data.":e.message;return r.a.createElement("div",{className:"error-message"},t)},Y=function(e){var t=e.label,a=e.link;return r.a.createElement("div",{key:t,className:"social-links"},r.a.createElement("a",{href:a,target:"_blank"},"web"===t?r.a.createElement("i",{className:"fa fa-user","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-".concat(t),"aria-hidden":"true"})))},$=a(32),H=a.n($),V=function(e){function t(){return Object(h.a)(this,t),Object(U.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.getUserInfo()}},{key:"render",value:function(){var e=this,t=this.props.user.data,a=t.city,n=Object(J.a)(t.languages,2),o=n[0],c=n[1],s=t.social,i=this.props.user,l=i.isLoading,u=i.error,m=i.errorMessage,d=this.props.bookmarks.articles;return r.a.createElement("section",null,l?r.a.createElement("div",{className:"loading"}):u?r.a.createElement(z,{message:m}):r.a.createElement("div",{className:"profile-container"},r.a.createElement("img",{src:H.a,alt:"user profile",className:"user-img"}),r.a.createElement("div",null,r.a.createElement("h3",{className:"user-name"},"Unknown User")),r.a.createElement("div",null,r.a.createElement("span",{className:"city-name"},"City: "),a),r.a.createElement("div",null,r.a.createElement("span",{className:"langs-name"},"Knowledge of languages: "),c,", ",o),r.a.createElement("div",{className:"bookmarks-container"},r.a.createElement("span",null,"Bookmarks [",d.length,"]: "),d.map(function(t){var a=t.id,n=t.name;return r.a.createElement(q,{key:a,id:a,name:n,deleteBookmark:e.props.deleteBookmark})})),s.map(function(e){var t=e.label,a=e.link;return r.a.createElement(Y,{key:t,label:t,link:a})})))}}]),t}(n.Component),X=a(11),Z=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(U.a)(this,Object(B.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(X.a)(Object(X.a)(a))),a}return Object(R.a)(t,e),Object(f.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.login.isLogged!==this.props.login.isLogged||e.login.isChecking!==this.props.login.isChecking}},{key:"handleClick",value:function(e){this.props.login.isLogged?(this.props.handleLogout(),this.props.history.push("/")):this.props.history.push("/login")}},{key:"render",value:function(){var e=this.props.login,t=e.isChecking,a=e.isLogged?"Logout":"Login";return t&&(a="Checking"),r.a.createElement("nav",{className:"flex-nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(Q.a,{to:"/"},r.a.createElement("i",{className:"fa fa-home","aria-hidden":"true"}),"Main")),r.a.createElement("li",null,r.a.createElement(Q.a,{to:"/news"},r.a.createElement("i",{className:"fa fa-newspaper-o","aria-hidden":"true"}),"News")),r.a.createElement("li",{className:"flex-growing"},r.a.createElement(Q.a,{to:"/profile"},r.a.createElement("i",{className:"fa fa-user","aria-hidden":"true"}),"Profile")),r.a.createElement("li",{className:"btn-login"},r.a.createElement("div",{onClick:this.handleClick},r.a.createElement("i",{className:"fa fa-sign-in","aria-hidden":"true"}),a))))}}]),t}(n.Component),ee=Object(s.b)(function(e){return{login:e.login}},function(e){return{handleLogout:function(t){return e(function(e){e({type:"LOGOUT"})})}}})(function(e){return r.a.createElement(Z,e)}),te=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(U.a)(this,Object(B.a)(t).call(this,e))).rand1=1,a.rand2=0,a.rand3=0,a.handleClick=a.handleClick.bind(Object(X.a)(Object(X.a)(a))),a}return Object(R.a)(t,e),Object(f.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=e.id,a=e.message,n=a.text,r=a.articleId;return""===n||t===r}},{key:"componentWillMount",value:function(){this.rand1=Math.floor(28*Math.random())+1,this.rand2=Math.floor(12*Math.random()),this.rand3=Math.floor(20*Math.random())+3}},{key:"handleClick",value:function(e){var t=this,a=this.props,n=a.name,r=a.id;this.props.addBookmark({id:r,name:n}),setTimeout(function(){t.props.clearTooltip()},1e3)}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.text,n=e.id,o=e.showTooltip,c=e.message.text;return r.a.createElement("article",null,r.a.createElement("h3",null,r.a.createElement("span",null,r.a.createElement(Q.a,{className:"article-button",to:"/news/".concat(n)},t)),r.a.createElement("span",{className:"article-date"},"".concat(ae[this.rand2]," ").concat(this.rand1),"  \xb7 ","".concat(this.rand3," min read")),r.a.createElement("span",{className:"article-bookmark",onClick:this.handleClick},r.a.createElement("i",{className:"fa fa-bookmark-o","aria-hidden":"true"},o&&r.a.createElement("span",{className:"tooltip"},c)))),r.a.createElement(Q.a,{className:"article-button",to:"/news/".concat(n)},r.a.createElement("div",null,a)))}}]),t}(n.Component),ae=["January","February","March","April","May","June","July","August","September","October","November","December"],ne=function(e){function t(){return Object(h.a)(this,t),Object(U.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.getNews()}},{key:"render",value:function(){var e=this,t=this.props.news,a=t.isFetching,n=t.articles,o=t.error,c=t.errorMessage;return r.a.createElement("section",{className:"news-container"},a?r.a.createElement("div",{className:"loading"}):o?r.a.createElement("div",null,c):n.map(function(t,a){return r.a.createElement(te,Object.assign({key:a,showTooltip:e.props.bookmarks.showTooltip,message:e.props.bookmarks.message,addBookmark:e.props.addBookmark,clearTooltip:e.props.clearBookmarksTooltip},t))}))}}]),t}(n.Component),re=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(U.a)(this,Object(B.a)(t).call(this,e))).props.getNews(),a.handleClick=a.handleClick.bind(Object(X.a)(Object(X.a)(a))),a}return Object(R.a)(t,e),Object(f.a)(t,[{key:"handleClick",value:function(e){var t=this,a=this.props.match.params.articleId,n=this.props.news.articles[a-1],r=n.name,o=n.id;this.props.addBookmark({id:o,name:r}),setTimeout(function(){t.props.clearBookmarksTooltip()},1e3)}},{key:"renderArticle",value:function(){var e=this.props.match.params.articleId,t=this.props.news.articles[e-1],a=t.text,n=t.name,o=this.props.bookmarks,c=o.showTooltip,s=o.message.text;return r.a.createElement("div",{className:"single-article"},r.a.createElement("h2",null,n),r.a.createElement("div",null,a),r.a.createElement("div",{className:"single-article-bookmark"},r.a.createElement("i",{className:"fa fa-bookmark-o","aria-hidden":"true",onClick:this.handleClick},c&&r.a.createElement("span",{className:"tooltip"},s))))}},{key:"render",value:function(){var e=this.props.news,t=e.isFetching,a=e.error;return r.a.createElement("article",null,t?r.a.createElement("div",{className:"loading"}):a?r.a.createElement("div",null,a):this.renderArticle())}}]),t}(n.Component),oe=Object(s.b)(function(e){return{news:e.news,bookmarks:e.bookmarks}},function(e){return{getNews:function(){return e(function(e){E||(e({type:"GET_NEWS_REQUEST"}),b(e))})},addBookmark:function(t){return e(function(e){return function(t,a){if(g.isAuthenticated()){var n=Object(C.a)(a().bookmarks.articles),r=!1;n.map(function(t){var a=t.id;t.name,a===e.id&&(r=!0)}),t(r?{type:"ADD_BOOKMARK_FAIL",payload:{text:"This bookmark already exists.",articleId:e.id}}:{type:"ADD_BOOKMARK_SUCCESS",payload:{article:e,message:{text:"Bookmark added!",articleId:e.id}}})}else t({type:"ADD_BOOKMARK_FAIL",payload:{text:"You need to be authorized to add bookmarks.",articleId:e.id}})}}(t))},clearBookmarksTooltip:function(){return e(function(e){e({type:"CLEAR_BOOKMARK_TOOLTIP"})})},deleteBookmark:function(t){return e(N(t))}}})(function(e){return r.a.createElement("div",null,r.a.createElement(K.a,{exact:!0,path:"/news",render:function(t){return r.a.createElement(ne,Object.assign({},e,t))}}),r.a.createElement(K.a,{exact:!0,path:"/news/:articleId",render:function(t){return r.a.createElement(re,Object.assign({},e,t))}}))}),ce=a(35),se=a(53),ie=Object(s.b)(function(e){return{user:e.user,bookmarks:e.bookmarks,isLogged:e.login.isLogged}},function(e){return{getUserInfo:function(){return e(function(e,t){if(!k){var a=g.getId();null!==a&&(e({type:"GET_USER_REQUEST"}),v(e,a))}})},deleteBookmark:function(t){return e(N(t))}}})(function(e){var t=e.component,a=Object(ce.a)(e,["component"]),n=a.isLogged;return console.log(n),r.a.createElement(K.a,{render:function(e){return n?r.a.createElement(t,Object.assign({},a,e)):r.a.createElement(se.a,{to:{pathname:"/login"}})}})}),le=function(e){function t(){return Object(h.a)(this,t),Object(U.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.login,t=e.isChecking,a=e.error,n=e.errorMessage;return e.isLogged?r.a.createElement(se.a,{to:{pathname:"/profile"}}):r.a.createElement("div",null,a&&r.a.createElement(z,{message:n}),t?r.a.createElement("div",{className:"loading"}):r.a.createElement("form",{id:"login-form",onSubmit:this.props.handleLogin},r.a.createElement("input",{required:!0,type:"email",id:"email",placeholder:"email"}),r.a.createElement("input",{required:!0,type:"password",id:"password",placeholder:"password"}),r.a.createElement("button",{type:"submit",id:"submit-btn"},"Submit")))}}]),t}(n.Component),ue=Object(s.b)(function(e){return{login:e.login}},function(e){return{handleLogin:function(t){return e(function(e){return function(t){e.preventDefault();var a=e.target,n=a.email.value,r=a.password.value;t({type:"POST_LOGIN_REQUEST"}),O(t,{email:n,password:r},a)}}(t))}}})(function(e){return r.a.createElement(le,e)}),me=function(e){function t(){return Object(h.a)(this,t),Object(U.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ee,{history:this.props.history}),r.a.createElement(G.a,null,r.a.createElement(K.a,{exact:!0,path:"/",component:W}),r.a.createElement(K.a,{path:"/news",component:oe}),r.a.createElement(K.a,{path:"/login",component:ue}),r.a.createElement(ie,{path:"/profile",component:V})))}}]),t}(n.Component),de=Object(F.a)(me);a(48),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(function(e){var t=e.store;return r.a.createElement(s.a,{store:t},r.a.createElement(i.a,{basename:"/news-app"},r.a.createElement(de,null)))},{store:M}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,2,1]]]);
//# sourceMappingURL=main.d1ef2186.chunk.js.map